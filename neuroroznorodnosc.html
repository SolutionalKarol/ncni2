<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-56VR40VHHV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-56VR40VHHV');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuror√≥≈ºnorodno≈õƒá | NCNI Wroc≈Çaw</title>
    <meta name="description" content="Kompleksowe wsparcie dla neuror√≥≈ºnorodno≈õci: ADHD, Autyzm, Dysleksja, WWO. Nowoczesna diagnostyka i terapie.">
    <link rel="icon" href="logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Lexend:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* --- CORE STYLES (Baza) --- */
        :root {
            --bg-body: #F8FAFC;        
            --bg-surface: rgba(255, 255, 255, 0.85);
            --primary: #0F766E;        
            --primary-dark: #0D5E57;
            --primary-light: #CCFBF1;
            --accent: #6366F1;        
            --accent-glow: rgba(99, 102, 241, 0.3);
            --text-main: #1E293B;
            --text-muted: #64748B;
            --border: #E2E8F0;
            --radius: 16px;
            --trans-default: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4 { font-family: 'Lexend', sans-serif; }

        /* Background */
        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -1; opacity: 0.6; pointer-events: none; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        .glass { background: var(--bg-surface); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03); }

        /* Header */
        header { position: sticky; top: 0; z-index: 1000; transition: var(--trans-default); border-bottom: 1px solid rgba(226, 232, 240, 0.6); padding: 12px 0; }
        .nav-wrapper { display: flex; flex-direction: column; align-items: center; gap: 16px; }
        .brand-bar { display: flex; justify-content: center; align-items: center; width: 100%; position: relative; }
        .logo { display: flex; align-items: center; gap: 14px; font-weight: 700; font-size: 1.6rem; color: var(--text-main); text-decoration: none; cursor: pointer; letter-spacing: -0.02em; }
        .logo img { height: 50px; width: auto; border-radius: 8px; }

        /* Responsive Text Classes */
        .mobile-text { display: none; } /* Domy≈õlnie ukryte */
        .desktop-text { display: inline; } /* Domy≈õlnie widoczne */

        .nav-links { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .nav-item { padding: 8px 18px; border-radius: 99px; font-size: 0.95rem; font-weight: 500; color: var(--text-muted); text-decoration: none; transition: var(--trans-default); cursor: pointer; }
        .nav-item:hover, .nav-item.active { color: var(--primary); background: var(--primary-light); }
        .nav-cta { background: var(--primary); color: white !important; box-shadow: 0 4px 12px rgba(15, 118, 110, 0.25); margin-left: 8px; }
        .nav-cta:hover { background: var(--primary-dark); transform: translateY(-1px); }

        /* Mobile */
        .mobile-toggle { display: none; background: none; border: none; cursor: pointer; padding: 8px; position: absolute; right: 0; top: 50%; transform: translateY(-50%); }
        .mobile-toggle span { display: block; width: 24px; height: 2px; background: var(--text-main); margin: 5px 0; transition: 0.3s; }
        .mobile-menu { position: fixed; top: 80px; left: 0; width: 100%; background: white; padding: 24px; border-bottom: 1px solid var(--border); transform: translateY(-150%); transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); z-index: 999; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .mobile-menu.active { transform: translateY(0); }
        .mobile-link { display: block; padding: 14px 0; font-size: 1.1rem; font-weight: 500; color: var(--text-main); text-decoration: none; border-bottom: 1px solid var(--bg-body); }

        @media (max-width: 900px) {
            .nav-wrapper { flex-direction: row; height: 60px; justify-content: center; padding: 0; }
            .brand-bar { justify-content: flex-start; width: auto; }
            .nav-links { display: none; }
            .mobile-toggle { display: block; }
            .logo { font-size: 1.1rem; }
            .logo img { height: 36px; }
            
            /* Logo Text Logic for Mobile */
            .desktop-text { display: none; }
            .mobile-text { display: inline; }
        }

        /* --- Page Specific --- */
        .hero-mini { padding: 80px 0 60px; text-align: center; }
        .hero-mini h1 { font-size: 3rem; margin-bottom: 24px; background: linear-gradient(135deg, var(--text-main), var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-mini p { font-size: 1.2rem; color: var(--text-muted); max-width: 700px; margin: 0 auto; }

        /* Grid Cards */
        .grid-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px; margin-bottom: 80px; }
        .topic-card {
            border-radius: 24px; padding: 32px; background: white;
            border: 1px solid var(--border); transition: all 0.3s ease;
            text-decoration: none; display: flex; flex-direction: column; height: 100%;
        }
        .topic-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 10px 40px rgba(15, 118, 110, 0.1); }
        
        .card-icon { 
            width: 64px; height: 64px; border-radius: 16px; background: #EEF2FF; color: var(--primary);
            display: flex; align-items: center; justify-content: center; font-size: 32px; margin-bottom: 24px;
        }
        .topic-card h3 { color: var(--text-main); font-size: 1.5rem; margin-bottom: 12px; }
        .topic-card p { color: var(--text-muted); flex-grow: 1; }
        .btn-link { color: var(--primary); font-weight: 600; margin-top: 24px; display: inline-flex; align-items: center; gap: 8px; }

        /* Special Cards */
        .card-accent { border-left: 4px solid var(--accent); }
        .card-accent .card-icon { color: var(--accent); background: #EEF2FF; }
        
        /* Footer */
        footer { background: white; border-top: 1px solid var(--border); padding: 60px 0 20px; margin-top: 40px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; }
    </style>
</head>
<body>

    <div id="bg-canvas"></div>

    <header class="glass">
        <div class="container nav-wrapper">
            <div class="brand-bar">
                <a href="index.html" class="logo">
                    <img src="logo.png" alt="NCNI">
                    <span class="desktop-text">Naukowe Centrum Neuroinnowacji</span>
                    <span class="mobile-text">NCNI</span>
                </a>
                <button class="mobile-toggle" aria-label="Menu">
                    <span></span><span></span><span></span>
                </button>
            </div>
            <nav class="nav-links">
                <a href="o-nas.html" class="nav-item">O nas</a>
                <a href="neuroroznorodnosc.html" class="nav-item active">Neuror√≥≈ºnorodno≈õƒá</a>
                <a href="psychologia.html" class="nav-item">Psychologia</a>
                <a href="technologie.html" class="nav-item">Technologie</a>
                <a href="oferta.html" class="nav-item">Oferta</a>
                <a href="index.html#rezerwacja" class="nav-item nav-cta">Um√≥w wizytƒô</a>
            </nav>
        </div>
    </header>

    <div class="mobile-menu">
        <a href="o-nas.html" class="mobile-link">O nas</a>
        <a href="neuroroznorodnosc.html" class="mobile-link">Neuror√≥≈ºnorodno≈õƒá</a>
        <a href="psychologia.html" class="mobile-link">Psychologia</a>
        <a href="technologie.html" class="mobile-link">Technologie</a>
        <a href="oferta.html" class="mobile-link">Oferta</a>
        <a href="index.html#rezerwacja" class="mobile-link" style="color: var(--primary); font-weight: 700;">Um√≥w wizytƒô</a>
    </div>

    <section class="hero-mini">
        <div class="container">
            <span style="background: var(--primary-light); color: var(--primary); padding: 6px 12px; border-radius: 99px; font-size: 0.9rem; font-weight: 600;">Obszar Wsparcia</span>
            <h1>Neuror√≥≈ºnorodno≈õƒá</h1>
            <p>
                Nie leczymy "inno≈õci" ‚Äì uczymy, jak z niƒÖ ≈ºyƒá, wykorzystywaƒá jej potencja≈Ç i radziƒá sobie z wyzwaniami. Podej≈õcie oparte na dowodach (EBM) i nowoczesnej technologii.
            </p>
        </div>
    </section>

    <section class="container">
        <div class="grid-cards">
            <!-- ADHD -->
            <a href="adhd.html" class="topic-card">
                <div class="card-icon">üß†</div>
                <h3>ADHD / ADD</h3>
                <p>Treningi funkcji wykonawczych dla dzieci i doros≈Çych. ZarzƒÖdzanie uwagƒÖ, impulsywno≈õciƒÖ i "chaosem" w g≈Çowie przy u≈ºyciu VR i Biofeedbacku.</p>
                <span class="btn-link">Poznaj program ‚Üí</span>
            </a>

            <!-- ASD -->
            <a href="asd.html" class="topic-card">
                <div class="card-icon">üß©</div>
                <h3>Spektrum Autyzmu (ASD)</h3>
                <p>Treningi kompetencji spo≈Çecznych w bezpiecznym, wirtualnym ≈õrodowisku. Praca nad odczytywaniem emocji i regulacjƒÖ napiƒôcia.</p>
                <span class="btn-link">Wiƒôcej informacji ‚Üí</span>
            </a>

            <!-- WWO -->
            <a href="wysoka-wrazliwosc.html" class="topic-card">
                <div class="card-icon">ü¶ã</div>
                <h3>Wysoka Wra≈ºliwo≈õƒá (WWO)</h3>
                <p>Jak nie ulegaƒá przestymulowaniu? Nauka higieny uk≈Çadu nerwowego i zarzƒÖdzania energiƒÖ w intensywnym ≈õwiecie.</p>
                <span class="btn-link">Sprawd≈∫ ofertƒô ‚Üí</span>
            </a>

            <!-- Dysleksja -->
            <a href="dysleksja.html" class="topic-card">
                <div class="card-icon">üìñ</div>
                <h3>Dysleksja</h3>
                <p>Nowoczesne treningi czytania i przetwarzania wzrokowego. Przekraczamy bariery edukacyjne za pomocƒÖ technologii VR.</p>
                <span class="btn-link">Zobacz metody ‚Üí</span>
            </a>

            <!-- Dyskalkulia -->
            <a href="dyskalkulia.html" class="topic-card">
                <div class="card-icon">üî¢</div>
                <h3>Dyskalkulia</h3>
                <p>Wsparcie w rozumieniu liczb i pojƒôƒá matematycznych. Treningi poznawcze aktywujƒÖce konkretne obszary m√≥zgu.</p>
                <span class="btn-link">Zobacz metody ‚Üí</span>
            </a>

            <!-- DCD -->
            <a href="dcd.html" class="topic-card">
                <div class="card-icon">ü§∏</div>
                <h3>Dyspraksja (DCD)</h3>
                <p>Wsparcie koordynacji ruchowej i planowania motorycznego. Integracja cia≈Ça i umys≈Çu w ruchu.</p>
                <span class="btn-link">Wiƒôcej informacji ‚Üí</span>
            </a>

            <!-- Tourette -->
            <a href="tourette.html" class="topic-card">
                <div class="card-icon">‚ö°</div>
                <h3>Zesp√≥≈Ç Tourette'a / Tiki</h3>
                <p>Terapie behawioralne (CBIT) i relaksacyjne wspomagajƒÖce kontrolƒô tik√≥w i redukcjƒô napiƒôcia w ciele.</p>
                <span class="btn-link">Poznaj program ‚Üí</span>
            </a>

            <!-- Metoda Kraszewskiego -->
            <a href="metoda-kraszewskiego.html" class="topic-card card-accent">
                <div class="card-icon">üéì</div>
                <h3>Metoda Kraszewskiego</h3>
                <p>Autorska metoda integracji sensoryczno-poznawczej opracowana w NCNI. Unikalne podej≈õcie do rozwoju m√≥zgu.</p>
                <span class="btn-link">Odkryj innowacjƒô ‚Üí</span>
            </a>

            <!-- Migrena -->
            <a href="migrena.html" class="topic-card">
                <div class="card-icon">ü§ï</div>
                <h3>Migrena i B√≥le G≈Çowy</h3>
                <p>Niefarmakologiczne wsparcie w leczeniu b√≥lu. Biofeedback termiczny i treningi relaksacji naczy≈Ñ krwiono≈õnych.</p>
                <span class="btn-link">Uwolnij siƒô od b√≥lu ‚Üí</span>
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer id="kontakt">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <a href="#" class="logo" style="margin-bottom: 20px; display: inline-block;">
                        <img src="logo.png" alt="NCNI">
                        NCNI
                    </a>
                    <p style="color: var(--text-muted); font-size: 0.95rem;">
                        Naukowe Centrum Neuroinnowacji.<br>
                        Tw√≥j partner w zdrowiu psychicznym.
                    </p>
                </div>
                <div>
                    <h4 style="margin-bottom: 16px;">Kontakt</h4>
                    <p style="color: var(--text-muted); margin-bottom: 8px;">ul. Stefana ≈ªeromskiego 60/5a</p>
                    <p style="color: var(--text-muted); margin-bottom: 8px;">50-312 Wroc≈Çaw</p>
                    <a href="mailto:kontakt@ncni.pl" style="color: var(--text-main);">kontakt@ncni.pl</a>
                </div>
                <div>
                    <h4 style="margin-bottom: 16px;">Social Media</h4>
                    <ul style="color: var(--text-muted); font-size: 0.95rem; list-style: none;">
                        <li style="margin-bottom: 8px;"><a href="https://youtube.com/@neuroinnowacje" target="_blank">YouTube</a></li>
                        <li style="margin-bottom: 8px;"><a href="https://x.com/neuroinnowacje" target="_blank">X (Twitter)</a></li>
                    </ul>
                </div>
            </div>
            <div style="border-top: 1px solid var(--border); padding-top: 24px; margin-top: 40px; text-align: center; color: var(--text-muted); font-size: 0.85rem;">
                &copy; 2025 Naukowe Centrum Neuroinnowacji sp. z o.o. | Design: Neuro Harmony System.
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // --- THREE.JS BACKGROUND ---
        function initParticles() {
            const container = document.getElementById('bg-canvas');
            if (!container) return;

            const scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0xF8FAFC, 0.002);

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 10;

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            const geometry = new THREE.BufferGeometry();
            const count = 200; 
            const positions = new Float32Array(count * 3);
            const colors = new Float32Array(count * 3);

            for(let i = 0; i < count * 3; i+=3) {
                positions[i] = (Math.random() - 0.5) * 25;
                positions[i+1] = (Math.random() - 0.5) * 25;
                positions[i+2] = (Math.random() - 0.5) * 25;

                const mix = Math.random();
                if(mix > 0.5) { colors[i] = 0.06; colors[i+1] = 0.46; colors[i+2] = 0.43; } 
                else { colors[i] = 0.39; colors[i+1] = 0.4; colors[i+2] = 0.94; }
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

            const material = new THREE.PointsMaterial({ size: 0.1, vertexColors: true, transparent: true, opacity: 0.4 });
            const particles = new THREE.Points(geometry, material);
            scene.add(particles);

            let mouseX = 0, mouseY = 0, targetX = 0, targetY = 0;
            const windowHalfX = window.innerWidth / 2;
            const windowHalfY = window.innerHeight / 2;

            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX - windowHalfX);
                mouseY = (event.clientY - windowHalfY);
            });

            const clock = new THREE.Clock();

            function animate() {
                const time = clock.getElapsedTime();
                targetX = mouseX * 0.0001; 
                targetY = mouseY * 0.0001;

                particles.rotation.y += 0.01 * (targetX - particles.rotation.y);
                particles.rotation.x += 0.01 * (targetY - particles.rotation.x);
                particles.rotation.z += 0.0005; 
                const scale = 1 + Math.sin(time * 0.5) * 0.02; 
                particles.scale.set(scale, scale, scale);

                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            }
            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }
        document.addEventListener("DOMContentLoaded", initParticles);

        // Mobile Menu
        const toggle = document.querySelector('.mobile-toggle');
        const menu = document.querySelector('.mobile-menu');
        if (toggle && menu) {
            toggle.addEventListener('click', () => {
                menu.classList.toggle('active');
            });
            menu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => menu.classList.remove('active'));
            });
        }
    </script>
    <div id="ania-widget" class="ania-container">
        
        <div class="ania-bubble" id="ania-greeting">
            Dzie≈Ñ dobry! ‚òÄÔ∏è Jestem WirtualnƒÖ AsystentkƒÖ NCNI. Kliknij we mnie, a odpowiem na Twoje pytania.
            <span class="ania-close-bubble" onclick="closeGreeting(event)">‚úï</span>
        </div>

        <div class="ania-chat-window glass" id="ania-window">
            <div class="ania-header">
                <div style="display:flex; align-items:center; gap:10px;">
                    <div style="position:relative;">
                        <img src="ania.jpg" alt="Ania" style="width:35px; height:35px; border-radius:50%; object-fit:cover; object-position: top;">
                        <div class="status-dot-small"></div>
                    </div>
                    <div>
                        <strong style="display:block; line-height:1.1;">Ania NCNI</strong>
                        <span style="font-size: 0.75rem; color: var(--primary);">Wirtualny Asystent</span>
                    </div>
                </div>
                <button onclick="toggleAnia()" style="background:none; border:none; cursor:pointer; font-size:1.2rem; color: var(--text-muted);">‚úï</button>
            </div>

            <div class="ania-messages" id="ania-messages-area"></div>
            <div class="ania-options-area" id="ania-options-area"></div>
        </div>

        <div class="ania-avatar" onclick="toggleAnia()">
            <img src="ania.jpg" alt="Ania Chat">
            <div class="status-dot"></div>
        </div>
    </div>

    <style>
        .ania-container { position: fixed; bottom: 24px; right: 24px; z-index: 2000; display: flex; flex-direction: column; align-items: flex-end; font-family: 'Inter', sans-serif; }
        .ania-avatar { width: 65px; height: 65px; border-radius: 50%; border: 3px solid white; box-shadow: 0 4px 20px rgba(15, 118, 110, 0.3); cursor: pointer; position: relative; transition: transform 0.3s; background: #fff; overflow: hidden; }
        .ania-avatar:hover { transform: scale(1.1); }
        .ania-avatar img { width: 100%; height: 100%; object-fit: cover; object-position: top; }
        .status-dot { width: 14px; height: 14px; background: #10B981; border: 2px solid white; border-radius: 50%; position: absolute; bottom: 4px; right: 4px; animation: pulse-dot 2s infinite; }
        .status-dot-small { width: 10px; height: 10px; background: #10B981; border: 1.5px solid white; border-radius: 50%; position: absolute; bottom: 0; right: 0; }
        @keyframes pulse-dot { 0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); } 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); } }
        .ania-bubble { background: white; padding: 12px 16px; border-radius: 12px 12px 0 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 12px; font-size: 0.9rem; color: var(--text-main); font-weight: 500; max-width: 260px; position: relative; opacity: 0; transform: translateY(10px); transition: all 0.4s ease; pointer-events: none; }
        .ania-bubble.visible { opacity: 1; transform: translateY(0); pointer-events: all; }
        .ania-close-bubble { position: absolute; top: -8px; right: -8px; background: #eee; width: 20px; height: 20px; border-radius: 50%; font-size: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #666; }
        .ania-chat-window { position: absolute; bottom: 80px; right: 0; width: 360px; height: 500px; background: white; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); display: flex; flex-direction: column; overflow: hidden; opacity: 0; transform: translateY(20px) scale(0.95); pointer-events: none; transition: all 0.3s; border: 1px solid var(--border); }
        .ania-chat-window.active { opacity: 1; transform: translateY(0) scale(1); pointer-events: all; }
        .ania-header { background: #F8FAFC; padding: 16px; border-bottom: 1px solid #E2E8F0; display: flex; justify-content: space-between; align-items: center; }
        .ania-messages { flex: 1; padding: 16px; overflow-y: auto; background: #fff; display: flex; flex-direction: column; gap: 12px; }
        .msg { padding: 10px 14px; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; max-width: 85%; animation: popIn 0.3s ease; }
        .msg.bot { background: #F1F5F9; color: var(--text-main); border-bottom-left-radius: 2px; align-self: flex-start; }
        .msg.user { background: var(--primary); color: white; border-bottom-right-radius: 2px; align-self: flex-end; }
        .ania-options-area { padding: 12px; background: #F8FAFC; border-top: 1px solid #E2E8F0; display: flex; flex-wrap: wrap; gap: 8px; justify-content: flex-end; }
        .chat-btn { background: white; border: 1px solid var(--primary); color: var(--primary); padding: 8px 14px; border-radius: 99px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: 0.2s; }
        .chat-btn:hover { background: var(--primary); color: white; }
        @keyframes popIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 480px) { .ania-chat-window { width: 300px; right: -10px; height: 450px; } }
    </style>

    <script>
        const chatKnowledge = {
            'start': { text: "Cze≈õƒá! üëã W czym mogƒô Ci pom√≥c?", options: [{ label: "üß† ADHD / ADD", next: 'adhd_info' }, { label: "üß© Autyzm (ASD)", next: 'asd_info' }, { label: "üí∞ Cennik / Oferta", next: 'oferta' }, { label: "üìÖ Um√≥w wizytƒô", action: 'booking' }] },
            'adhd_info': { text: "Oferujemy pe≈ÇnƒÖ diagnozƒô (DIVA-5, MOXO) oraz treningi VR i Biofeedback.", options: [{ label: "Jak wyglƒÖda diagnoza?", next: 'adhd_diagnoza' }, { label: "Na czym polega terapia?", next: 'adhd_terapia' }, { label: "Wr√≥ƒá", next: 'start' }] },
            'adhd_diagnoza': { text: "1. Wywiad kliniczny (DIVA-5).\n2. Test MOXO.\n3. Raport ko≈Ñcowy.", options: [{ label: "Chcƒô siƒô zapisaƒá", action: 'booking' }, { label: "Co to jest MOXO?", next: 'moxo' }] },
            'moxo': { text: "MOXO to komputerowy test badajƒÖcy uwagƒô, czas reakcji i impulsywno≈õƒá.", options: [{ label: "Rozumiem", next: 'start' }, { label: "Um√≥w badanie", action: 'booking' }] },
            'adhd_terapia': { text: "Wykorzystujemy VR (WirtualnƒÖ Rzeczywisto≈õƒá) i Biofeedback HRV do treningu skupienia.", options: [{ label: "Zapisz mnie", action: 'booking' }, { label: "Wr√≥ƒá", next: 'start' }] },
            'asd_info': { text: "Jeste≈õmy miejscem przyjaznym osobom w spektrum (Neurodiversity Affirming).", options: [{ label: "Um√≥w konsultacjƒô", action: 'booking' }, { label: "Wr√≥ƒá", next: 'start' }] },
            'oferta': { text: "Oferujemy diagnozƒô, psychoterapiƒô, VR, Biofeedback i dietetykƒô.", options: [{ label: "Adres?", next: 'adres' }, { label: "Um√≥w wizytƒô", action: 'booking' }] },
            'adres': { text: "Wroc≈Çaw, ul. Stefana ≈ªeromskiego 60/5a.", options: [{ label: "Dziƒôki!", next: 'start' }] }
        };

        const chatWindow = document.getElementById('ania-window');
        const messagesArea = document.getElementById('ania-messages-area');
        const optionsArea = document.getElementById('ania-options-area');
        const bubble = document.getElementById('ania-greeting');
        let isChatOpen = false;

        function toggleAnia() {
            isChatOpen = !isChatOpen;
            chatWindow.classList.toggle('active', isChatOpen);
            bubble.classList.remove('visible');
            if(isChatOpen && messagesArea.children.length === 0) loadScenario('start');
        }
        function closeGreeting(e) { e.stopPropagation(); bubble.classList.remove('visible'); }
        setTimeout(() => { if(!isChatOpen) bubble.classList.add('visible'); }, 3000);

        function addMessage(text, sender) {
            const div = document.createElement('div'); div.classList.add('msg', sender);
            div.innerHTML = text.replace(/\n/g, '<br>');
            messagesArea.appendChild(div); messagesArea.scrollTop = messagesArea.scrollHeight;
        }
        function loadScenario(key) {
            const data = chatKnowledge[key]; if(!data) return;
            showTypingIndicator();
            setTimeout(() => { removeTypingIndicator(); addMessage(data.text, 'bot'); renderOptions(data.options); }, 600);
        }
        function renderOptions(options) {
            optionsArea.innerHTML = '';
            if(!options) return;
            options.forEach(opt => {
                const btn = document.createElement('button'); btn.classList.add('chat-btn'); btn.innerText = opt.label;
                btn.onclick = () => handleUserChoice(opt); optionsArea.appendChild(btn);
            });
        }
        function handleUserChoice(opt) {
            addMessage(opt.label, 'user'); optionsArea.innerHTML = '';
            if (opt.action === 'booking') {
                window.location.href = 'index.html#rezerwacja';
                if(window.innerWidth < 480) toggleAnia();
                setTimeout(() => { addMessage("Przenios≈Çam Ciƒô do formularza. Powodzenia! üòä", 'bot'); }, 500);
            } else if (opt.next) { loadScenario(opt.next); }
        }
        function showTypingIndicator() {
            const loader = document.createElement('div'); loader.id = 'typing-loader'; loader.className = 'msg bot';
            loader.style.color = '#aaa'; loader.innerText = '...';
            messagesArea.appendChild(loader); messagesArea.scrollTop = messagesArea.scrollHeight;
        }
        function removeTypingIndicator() { const loader = document.getElementById('typing-loader'); if(loader) loader.remove(); }
    </script>
</body>
</html>
